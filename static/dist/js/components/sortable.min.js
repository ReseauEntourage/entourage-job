/*! UIkit 3.3.6 | https://www.getuikit.com | (c) 2014 - 2020 YOOtheme | MIT License */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("uikit-util")):"function"==typeof define&&define.amd?define("uikitsortable",["uikit-util"],e):(t=t||self).UIkitSortable=e(t.UIkit.util)}(this,function(m){"use strict";var h,l="uk-animation-target";function c(t,e){var i=m.css(t,"zIndex");return!!m.isVisible(t)&&m.assign({display:"",opacity:e?m.css(t,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:"auto"===i?m.index(t):i},u(t))}function d(t){m.css(t.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",width:""}),m.removeClass(t,l),m.css(t,"height","")}function u(t){var e=m.offset(t),i=e.height,n=e.width,s=m.position(t);return{top:s.top,left:s.left,height:i,width:n}}var p,t={mixins:[{connected:function(){m.hasClass(this.$el,this.$name)||m.addClass(this.$el,this.$name)}},{props:{animation:Number},data:{animation:150},computed:{target:function(){return this.$el}},methods:{animate:function(t){var n=this;!function(){if(h)return;(h=m.append(document.head,"<style>").sheet).insertRule("."+l+" > * {\n            margin-top: 0 !important;\n            transform: none !important;\n        }",0)}();var s=m.children(this.target),o=s.map(function(t){return c(t,!0)}),e=m.height(this.target),i=window.pageYOffset;t(),m.Transition.cancel(this.target),s.forEach(m.Transition.cancel),d(this.target),this.$update(this.target,"resize"),m.fastdom.flush();var r=m.height(this.target),a=(s=s.concat(m.children(this.target).filter(function(t){return!m.includes(s,t)}))).map(function(t,e){return!!(t.parentNode&&e in o)&&(o[e]?m.isVisible(t)?u(t):{opacity:0}:{opacity:m.isVisible(t)?1:0})});return o=a.map(function(t,e){var i=s[e].parentNode===n.target&&(o[e]||c(s[e]));if(i)if(t){if(!("opacity"in t)){i.opacity%1?t.opacity=1:delete i.opacity}}else delete i.opacity;return i}),m.addClass(this.target,l),s.forEach(function(t,e){return o[e]&&m.css(t,o[e])}),m.css(this.target,"height",e),m.scrollTop(window,i),m.Promise.all(s.map(function(t,e){return["top","left","height","width"].some(function(t){return o[e][t]!==a[e][t]})&&m.Transition.start(t,a[e],n.animation,"ease")}).concat(e!==r&&m.Transition.start(this.target,{height:r},this.animation,"ease"))).then(function(){s.forEach(function(t,e){return m.css(t,{display:0===a[e].opacity?"none":"",zIndex:""})}),d(n.target),n.$update(n.target,"resize"),m.fastdom.flush()},m.noop)}}}],props:{group:String,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},data:{group:!1,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1,pos:{}},created:function(){var i=this;["init","start","move","end"].forEach(function(t){var e=i[t];i[t]=function(t){m.assign(i.pos,m.getEventPos(t)),e(t)}})},events:{name:m.pointerDown,passive:!1,handler:"init"},computed:{isEmpty:{get:function(){return m.isEmpty(this.$el.children)},watch:function(t){m.toggleClass(this.$el,this.clsEmpty,t)},immediate:!0},handles:{get:function(t,e){var i=t.handle;return i?m.$$(i,e):m.children(e)},watch:function(t,e){m.css(e,{touchAction:"",userSelect:""}),m.css(t,{touchAction:m.hasTouch?"none":"",userSelect:"none"})},immediate:!0}},update:{write:function(){if(this.drag&&m.parent(this.placeholder)){var t=this.pos,e=t.x,i=t.y,n=this.origin,s=n.offsetTop,o=n.offsetLeft,r=this.drag,a=r.offsetHeight,h=r.offsetWidth,l=m.offset(window),c=l.right,d=l.bottom,u=document.elementFromPoint(e,i);m.css(this.drag,{top:m.clamp(i-s,0,d-a),left:m.clamp(e-o,0,c-h)});var p=this.getSortable(u),f=this.getSortable(this.placeholder),g=p!==f;if(p&&!m.within(u,this.placeholder)&&(!g||p.group&&p.group===f.group)){if(u=p.$el===u.parentNode&&u||m.children(p.$el).filter(function(t){return m.within(u,t)})[0],g)f.remove(this.placeholder);else if(!u)return;p.insert(this.placeholder,u),m.includes(this.touched,p)||this.touched.push(p)}}},events:["move"]},methods:{init:function(t){var e=t.target,i=t.button,n=t.defaultPrevented,s=m.children(this.$el).filter(function(t){return m.within(e,t)})[0];!s||n||0<i||m.isInput(e)||m.within(e,"."+this.clsNoDrag)||this.handle&&!m.within(e,this.handle)||(t.preventDefault(),this.touched=[this],this.placeholder=s,this.origin=m.assign({target:e,index:m.index(s)},this.pos),m.on(document,m.pointerMove,this.move),m.on(document,m.pointerUp,this.end),this.threshold||this.start(t))},start:function(t){var e,i,n;this.drag=(e=this.$container,i=this.placeholder,n=m.append(e,i.outerHTML.replace(/(^<)li|li(\/>$)/g,"$1div$2")),m.attr(n,"style",m.attr(n,"style")+";margin:0!important"),m.css(n,m.assign({boxSizing:"border-box",width:i.offsetWidth,height:i.offsetHeight,overflow:"hidden"},m.css(i,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),m.height(n.firstElementChild,m.height(i.firstElementChild)),n);var s,o,r=this.placeholder.getBoundingClientRect(),a=r.left,h=r.top;m.assign(this.origin,{offsetLeft:this.pos.x-a,offsetTop:this.pos.y-h}),m.addClass(this.drag,this.clsDrag,this.clsCustom),m.addClass(this.placeholder,this.clsPlaceholder),m.addClass(this.$el.children,this.clsItem),m.addClass(document.documentElement,this.clsDragState),m.trigger(this.$el,"start",[this,this.placeholder]),s=this.pos,o=Date.now(),p=setInterval(function(){var t=s.x,a=s.y;a+=window.pageYOffset;var h=.3*(Date.now()-o);o=Date.now(),m.scrollParents(document.elementFromPoint(t,s.y)).some(function(t){var e=t.scrollTop,i=t.scrollHeight,n=m.offset(m.getViewport(t)),s=n.top,o=n.bottom,r=n.height;if(s<a&&a<s+30)e-=h;else{if(!(a<o&&o-30<a))return;e+=h}if(0<e&&e<i-r)return m.scrollTop(t,e),!0})},15),this.move(t)},move:function(t){this.drag?this.$emit("move"):(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},end:function(t){if(m.off(document,m.pointerMove,this.move),m.off(document,m.pointerUp,this.end),m.off(window,"scroll",this.scroll),this.drag){clearInterval(p);var e=this.getSortable(this.placeholder);this===e?this.origin.index!==m.index(this.placeholder)&&m.trigger(this.$el,"moved",[this,this.placeholder]):(m.trigger(e.$el,"added",[e,this.placeholder]),m.trigger(this.$el,"removed",[this,this.placeholder])),m.trigger(this.$el,"stop",[this,this.placeholder]),m.remove(this.drag),this.drag=null;var i=this.touched.map(function(t){return t.clsPlaceholder+" "+t.clsItem}).join(" ");this.touched.forEach(function(t){return m.removeClass(t.$el.children,i)}),m.removeClass(document.documentElement,this.clsDragState)}else"touchend"===t.type&&t.target.click()},insert:function(i,n){var s=this;m.addClass(this.$el.children,this.clsItem);function t(){var t,e;n?!m.within(i,s.$el)||(e=n,(t=i).parentNode===e.parentNode&&m.index(t)>m.index(e))?m.before(n,i):m.after(n,i):m.append(s.$el,i)}this.animation?this.animate(t):t()},remove:function(t){m.within(t,this.$el)&&(this.animation?this.animate(function(){return m.remove(t)}):m.remove(t))},getSortable:function(t){return t&&(this.$getComponent(t,"sortable")||this.getSortable(t.parentNode))}}};return"undefined"!=typeof window&&window.UIkit&&window.UIkit.component("sortable",t),t});